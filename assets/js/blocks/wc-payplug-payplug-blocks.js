(()=>{"use strict";var e={20:(e,a,t)=>{var n=t(609),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,p=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,a,t){var n,s={},d=null,c=null;for(n in void 0!==t&&(d=""+t),void 0!==a.key&&(d=""+a.key),void 0!==a.ref&&(c=a.ref),a)i.call(a,n)&&!l.hasOwnProperty(n)&&(s[n]=a[n]);if(e&&e.defaultProps)for(n in a=e.defaultProps)void 0===s[n]&&(s[n]=a[n]);return{$$typeof:r,type:e,key:d,ref:c,props:s,_owner:p.current}}a.Fragment=s,a.jsx=d,a.jsxs=d},848:(e,a,t)=>{e.exports=t(20)},609:e=>{e.exports=window.React}},a={};function t(n){var r=a[n];if(void 0!==r)return r.exports;var s=a[n]={exports:{}};return e[n](s,s.exports,t),s.exports}t.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},t.d=(e,a)=>{for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a);const n=window.wp.i18n,r=window.wc.wcBlocksRegistry,s=window.wp.htmlEntities,i=window.wc.wcSettings;var p=t(609),l=t(848);const d=(0,i.getSetting)("payplug_data",{}),c=({props:e})=>{var a={input:{"font-size":"1em","background-color":"transparent"},"::placeholder":{"font-size":"1em",color:"#777","font-style":"italic"},":invalid":{color:"#FF0000","font-size":"1em"}},t={init:dalenys.hostedFields({key:{id:"970c4f7c-c62e-40d2-8084-b61781326c81",value:"lr3*{F/4?nLnTq.t"},fields:{card:{id:"card-container",placeholder:d?.payplug_integrated_payment_card_number,enableAutospacing:!0,style:a,onInput:function(e){void 0!==e.cardType&&jQuery("input[type='radio'][name='schemeOptions'][value='"+e.cardType+"']").attr("checked",!0),t.handleInvalidFieldErrors(e,jQuery(".IntegratedPayment_error.-pan .invalidField"))}},expiry:{id:"expiry-container",placeholder:d?.payplug_integrated_payment_expiration_date,style:a,onInput:function(e){t.handleInvalidFieldErrors(e,jQuery(".IntegratedPayment_error.-exp .invalidField"))}},cryptogram:{id:"cvv-container",placeholder:d?.payplug_integrated_payment_cvv,style:a,onInput:function(e){t.handleInvalidFieldErrors(e,jQuery(".IntegratedPayment_error.-cvv .invalidField"))}}}}),handleInvalidFieldErrors:function(e,a){"invalid"===e.type&&(a.removeClass("-hide"),a.parent().removeClass("-hide")),"valid"===e.type&&(a.addClass("-hide"),a.parent().addClass("-hide"))}};return(0,p.useEffect)((()=>{t.init.load()}),[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"payplug IntegratedPayment_container -scheme",children:[(0,l.jsx)("div",{children:d?.payplug_integrated_payment_your_card}),(0,l.jsxs)("div",{className:"payplug IntegratedPayment_schemes",children:[(0,l.jsxs)("label",{className:"payplug IntegratedPayment_scheme -cb",children:[(0,l.jsx)("input",{type:"radio",name:"schemeOptions",value:"cb"}),(0,l.jsx)("span",{})]}),(0,l.jsxs)("label",{className:"payplug IntegratedPayment_scheme -visa",children:[(0,l.jsx)("input",{type:"radio",name:"schemeOptions",value:"visa"}),(0,l.jsx)("span",{})]}),(0,l.jsxs)("label",{className:"payplug IntegratedPayment_scheme -mastercard",children:[(0,l.jsx)("input",{type:"radio",name:"schemeOptions",value:"mastercard"}),(0,l.jsx)("span",{})]})]})]}),(0,l.jsx)("div",{className:"payplug IntegratedPayment_container -pan pan-input-container","data-e2e-name":"pan",children:(0,l.jsx)("span",{className:"input-container",id:"card-container"})}),(0,l.jsxs)("div",{className:"payplug IntegratedPayment_error -pan -hide",children:[(0,l.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:d?.payplug_integrated_payment_pan_error}),(0,l.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:d?.payplug_integrated_payment_empty})]}),(0,l.jsx)("div",{className:"payplug IntegratedPayment_container -exp exp-input-container","data-e2e-name":"expiration",children:(0,l.jsx)("span",{className:"input-container",id:"expiry-container"})}),(0,l.jsx)("div",{className:"payplug IntegratedPayment_container -cvv cvv-input-container","data-e2e-name":"cvv",children:(0,l.jsx)("span",{className:"input-container",id:"cvv-container"})}),(0,l.jsxs)("div",{className:"payplug IntegratedPayment_error -exp -hide",children:[(0,l.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:d?.payplug_integrated_payment_exp_error}),(0,l.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:d?.payplug_integrated_payment_empty})]}),(0,l.jsxs)("div",{className:"payplug IntegratedPayment_error -cvv -hide",children:[(0,l.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:d?.payplug_integrated_payment_cvv_error}),(0,l.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:d?.payplug_integrated_payment_empty})]}),(0,l.jsx)("div",{className:"payplug IntegratedPayment_error -payment",children:(0,l.jsx)("span",{children:d?.payplug_integrated_payment_error})}),(0,l.jsxs)("div",{className:"payplug IntegratedPayment_container -transaction",children:[(0,l.jsx)("img",{className:"lock-icon",src:d?.lock}),(0,l.jsx)("label",{className:"transaction-label",children:d?.payplug_integrated_payment_transaction_secure}),(0,l.jsx)("img",{className:"payplug-logo",src:d?.logo})]}),(0,l.jsx)("div",{className:"payplug IntegratedPayment_container -privacy-policy",children:(0,l.jsx)("a",{href:d?.payplug_integrated_payment_privacy_policy_url,target:"_blank",children:d?.payplug_integrated_payment_privacy_policy})})]})},o=window.wp.element,y=window.wp.data,m=window.jQuery;var u=t.n(m);const g=(0,i.getSetting)("payplug_data",{}),_=((0,i.getSetting)("payplug_data",{}),({props:e,settings:a})=>{const{eventRegistration:t,emitResponse:n,shouldSavePayment:r}=e,{onPaymentSetup:s,onCheckoutSuccess:i}=t,{CHECKOUT_STORE_KEY:l}=window.wc.wcBlocksData,d=(0,y.useSelect)((e=>e(l).getOrderId()));let c;return(0,p.useEffect)((()=>{const e=s((async()=>(await((e,a,t)=>{const n={order_id:t,"woocommerce-process-checkout-nonce":g.wp_nonce,gateway:a?.payment_method};return new Promise(((e,a)=>u().ajax({type:"POST",data:n,url:g.payplug_create_intent_payment}).success((function(a){e(a)})).error((function(e){a(e)}))))})(0,a,d).then((async e=>{c=e})),{type:"success"})));return()=>{e()}}),[r,s,n.noticeContexts.PAYMENTS,n.responseTypes.ERROR,n.responseTypes.SUCCESS]),(0,p.useEffect)((()=>{const e=i((async({processingResponse:{paymentDetails:e}})=>{await function(e){return new Promise((async(a,t)=>{try{window.redirection_url=e.data.cancel||!1,await Payplug.showPayment(e.data.redirect)}catch(e){t(e)}}))}(c).then((()=>({type:"error",message:"Timeout",messageContext:n.noticeContexts.PAYMENTS})))}));return()=>{e()}}),[i]),(0,o.createElement)(o.Fragment,null)});var v;const h=(0,i.getSetting)("payplug_data",{}),x=(0,n.__)("Gateway method title","payplug"),j=(0,s.decodeEntities)(h?.title)||x,w=e=>!0===h?.IP?(0,l.jsx)(c,{settings:h,props:e}):!0===h?.popup?(0,l.jsx)(_,{settings:h,props:e}):window.wp.htmlEntities.decodeEntities(h?.description||""),f=()=>(0,l.jsxs)("span",{style:{width:"100%"},children:[j,(0,l.jsx)(P,{})]}),P=()=>(0,l.jsx)("img",{src:h?.icon.src,alt:h?.icon.icon_alt,className:"payplug-payment-icon",style:{float:"right"}}),N={name:"payplug",label:(0,l.jsx)(f,{}),content:(0,l.jsx)(w,{}),edit:(0,l.jsx)(w,{}),canMakePayment:()=>!0,ariaLabel:j,supports:{features:h.supports,showSaveOption:h?.oneclick&&h?.IP,showSavedCards:null!==(v=h.showSaveOption)&&void 0!==v&&v}};(0,r.registerPaymentMethod)(N)})();