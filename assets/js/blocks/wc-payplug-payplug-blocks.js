(()=>{"use strict";var e={20:(e,a,t)=>{var n=t(609),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,d=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,a,t){var n,i={},l=null,p=null;for(n in void 0!==t&&(l=""+t),void 0!==a.key&&(l=""+a.key),void 0!==a.ref&&(p=a.ref),a)s.call(a,n)&&!o.hasOwnProperty(n)&&(i[n]=a[n]);if(e&&e.defaultProps)for(n in a=e.defaultProps)void 0===i[n]&&(i[n]=a[n]);return{$$typeof:r,type:e,key:l,ref:p,props:i,_owner:d.current}}a.Fragment=i,a.jsx=l,a.jsxs=l},848:(e,a,t)=>{e.exports=t(20)},609:e=>{e.exports=window.React}},a={};function t(n){var r=a[n];if(void 0!==r)return r.exports;var i=a[n]={exports:{}};return e[n](i,i.exports,t),i.exports}t.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},t.d=(e,a)=>{for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a);const n=window.wp.i18n,r=window.wc.wcBlocksRegistry,i=window.wp.htmlEntities,s=window.wc.wcSettings;var d=t(609),o=t(848);const l=(0,s.getSetting)("payplug_data",{});var p={input:{"font-size":"1em","background-color":"transparent"},"::placeholder":{"font-size":"1em",color:"#777","font-style":"italic"},":invalid":{color:"#FF0000","font-size":"1em"}},c={hfields:dalenys.hostedFields({key:{id:"970c4f7c-c62e-40d2-8084-b61781326c81",value:"lr3*{F/4?nLnTq.t"},fields:{card:{id:"card-container",placeholder:l?.payplug_integrated_payment_card_number,enableAutospacing:!0,style:p,onInput:function(e){void 0!==e.cardType&&jQuery("input[type='radio'][name='schemeOptions'][value='"+e.cardType+"']").attr("checked",!0),c.handleInvalidFieldErrors(e,jQuery(".IntegratedPayment_error.-pan .invalidField"))}},expiry:{id:"expiry-container",placeholder:l?.payplug_integrated_payment_expiration_date,style:p,onInput:function(e){c.handleInvalidFieldErrors(e,jQuery(".IntegratedPayment_error.-exp .invalidField"))}},cryptogram:{id:"cvv-container",placeholder:l?.payplug_integrated_payment_cvv,style:p,onInput:function(e){c.handleInvalidFieldErrors(e,jQuery(".IntegratedPayment_error.-cvv .invalidField"))}}}}),handleInvalidFieldErrors:function(e,a){"invalid"===e.type&&(a.removeClass("-hide"),a.parent().removeClass("-hide")),"valid"!==e.type&&"empty"!==e.type||(a.addClass("-hide"),a.parent().addClass("-hide"))},showInputErrorBorder:function(e,a){jQuery(e).addClass("hosted-fields-invalid-state"),jQuery(a).removeClass("-hide"),jQuery(a).parent().removeClass("-hide")},hideInputErrorBorder:function(e,a){jQuery(e).removeClass("hosted-fields-invalid-state"),jQuery(a).addClass("-hide"),jQuery(a).parent().addClass("-hide")},validateInput:function(e,a){return jQuery(e).val().length<5&&jQuery(e).val().length>0?(c.showInputErrorBorder(e,a),!1):(c.hideInputErrorBorder(e,a),!0)},submitValidation:function(e,a){return jQuery(e).val().length<1?(c.showInputErrorBorder(e,a),!1):(c.hideInputErrorBorder(e,a),!0)}};const y=({props:e})=>{const{eventRegistration:a}=e,{onCheckoutValidation:t,onPaymentSetup:n}=a;return(0,d.useEffect)((()=>{c.hfields.load(),jQuery("[name=hosted-fields-cardHolder]").on("input",(function(e){c.validateInput(e.target,jQuery(".IntegratedPayment_error.-cardHolder .invalidField"))}))}),[]),(0,d.useEffect)((()=>{const e=t((async()=>{console.log("start");try{const e=await async function(){return new Promise(((e,a)=>{c.hfields.createToken((function(t){c.submitValidation(jQuery("[name=hosted-fields-cardHolder]"),jQuery(".IntegratedPayment_error.-cardHolder .invalidField"))&&"0000"==t.execCode?(document.getElementById("hf-token").value=t.hfToken,e(t)):a(new Error("Tokenization failed"))}))}))}();return console.log("finished"),console.log(e),"0000"===e.execCode||{errorMessage:l?.payplug_invalid_form}}catch(e){return console.error("Error during tokenization:",e),{errorMessage:l?.payplug_invalid_form}}}));return()=>{e()}}),[t]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"payplug IntegratedPayment_container -cardHolder cardHolder-input-container","data-e2e-name":"cardHolder",children:(0,o.jsx)("p",{className:"cardHolder-container",children:(0,o.jsx)("span",{className:"input-container",id:"cardHolder-container",children:(0,o.jsx)("input",{type:"text",name:"hosted-fields-cardHolder",id:"hosted-fields-cardHolder",className:"hosted-fields hosted-fields-input-state",placeholder:l?.payplug_integrated_payment_cardholder})})})}),(0,o.jsxs)("div",{className:"payplug IntegratedPayment_error -cardHolder -hide",children:[(0,o.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:l?.payplug_integrated_payment_cardHolder_error}),(0,o.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:l?.payplug_integrated_payment_empty})]}),(0,o.jsxs)("div",{className:"payplug IntegratedPayment_container -scheme",children:[(0,o.jsx)("div",{children:l?.payplug_integrated_payment_your_card}),(0,o.jsxs)("div",{className:"payplug IntegratedPayment_schemes",children:[(0,o.jsxs)("label",{className:"payplug IntegratedPayment_scheme -cb",children:[(0,o.jsx)("input",{type:"radio",name:"schemeOptions",value:"cb"}),(0,o.jsx)("span",{})]}),(0,o.jsxs)("label",{className:"payplug IntegratedPayment_scheme -visa",children:[(0,o.jsx)("input",{type:"radio",name:"schemeOptions",value:"visa"}),(0,o.jsx)("span",{})]}),(0,o.jsxs)("label",{className:"payplug IntegratedPayment_scheme -mastercard",children:[(0,o.jsx)("input",{type:"radio",name:"schemeOptions",value:"mastercard"}),(0,o.jsx)("span",{})]})]})]}),(0,o.jsx)("div",{className:"payplug IntegratedPayment_container -pan pan-input-container","data-e2e-name":"pan",children:(0,o.jsx)("span",{className:"input-container",id:"card-container"})}),(0,o.jsxs)("div",{className:"payplug IntegratedPayment_error -pan -hide",children:[(0,o.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:l?.payplug_integrated_payment_pan_error}),(0,o.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:l?.payplug_integrated_payment_empty})]}),(0,o.jsx)("div",{className:"payplug IntegratedPayment_container -exp exp-input-container","data-e2e-name":"expiration",children:(0,o.jsx)("span",{className:"input-container",id:"expiry-container"})}),(0,o.jsx)("div",{className:"payplug IntegratedPayment_container -cvv cvv-input-container","data-e2e-name":"cvv",children:(0,o.jsx)("span",{className:"input-container",id:"cvv-container"})}),(0,o.jsxs)("div",{className:"payplug IntegratedPayment_error -exp -hide",children:[(0,o.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:l?.payplug_integrated_payment_exp_error}),(0,o.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:l?.payplug_integrated_payment_empty})]}),(0,o.jsxs)("div",{className:"payplug IntegratedPayment_error -cvv -hide",children:[(0,o.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:l?.payplug_integrated_payment_cvv_error}),(0,o.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:l?.payplug_integrated_payment_empty})]}),(0,o.jsx)("div",{className:"payplug IntegratedPayment_error -payment",children:(0,o.jsx)("span",{children:l?.payplug_integrated_payment_error})}),(0,o.jsxs)("div",{className:"payplug IntegratedPayment_container -transaction",children:[(0,o.jsx)("img",{className:"lock-icon",src:l?.lock}),(0,o.jsx)("label",{className:"transaction-label",children:l?.payplug_integrated_payment_transaction_secure}),(0,o.jsx)("img",{className:"payplug-logo",src:l?.logo})]}),(0,o.jsx)("div",{className:"payplug IntegratedPayment_container -privacy-policy",children:(0,o.jsx)("a",{href:l?.payplug_integrated_payment_privacy_policy_url,target:"_blank",children:l?.payplug_integrated_payment_privacy_policy})}),(0,o.jsx)("input",{type:"hidden",name:"hf-token",id:"hf-token"})]})},u=window.wp.element,m=window.wp.data,g=window.jQuery;var h=t.n(g);const _=(0,s.getSetting)("payplug_data",{}),v=((0,s.getSetting)("payplug_data",{}),({props:e,settings:a})=>{const{eventRegistration:t,emitResponse:n,shouldSavePayment:r}=e,{onPaymentSetup:i,onCheckoutSuccess:s}=t,{CHECKOUT_STORE_KEY:o}=window.wc.wcBlocksData,l=(0,m.useSelect)((e=>e(o).getOrderId()));let p;return(0,d.useEffect)((()=>{const e=i((async()=>(await((e,a,t)=>{const n={order_id:t,"woocommerce-process-checkout-nonce":_.wp_nonce,gateway:a?.payment_method};return new Promise(((e,a)=>h().ajax({type:"POST",data:n,url:_.payplug_create_intent_payment}).success((function(a){e(a)})).error((function(e){a(e)}))))})(0,a,l).then((async e=>{p=e})),{type:"success"})));return()=>{e()}}),[r,i,n.noticeContexts.PAYMENTS,n.responseTypes.ERROR,n.responseTypes.SUCCESS]),(0,d.useEffect)((()=>{const e=s((async({processingResponse:{paymentDetails:e}})=>{await function(e){return new Promise((async(a,t)=>{try{window.redirection_url=e.data.cancel||!1,await Payplug.showPayment(e.data.redirect)}catch(e){t(e)}}))}(p).then((()=>({type:"error",message:"Timeout",messageContext:n.noticeContexts.PAYMENTS})))}));return()=>{e()}}),[s]),(0,u.createElement)(u.Fragment,null)});var x;const j=(0,s.getSetting)("payplug_data",{}),f=(0,n.__)("Gateway method title","payplug"),w=(0,i.decodeEntities)(j?.title)||f,I=e=>!0===j?.IP?(0,o.jsx)(y,{settings:j,props:e}):!0===j?.popup?(0,o.jsx)(v,{settings:j,props:e}):window.wp.htmlEntities.decodeEntities(j?.description||""),P=()=>(0,o.jsxs)("span",{style:{width:"100%"},children:[w,(0,o.jsx)(E,{})]}),E=()=>(0,o.jsx)("img",{src:j?.icon.src,alt:j?.icon.icon_alt,className:"payplug-payment-icon",style:{float:"right"}}),N={name:"payplug",label:(0,o.jsx)(P,{}),content:(0,o.jsx)(I,{}),edit:(0,o.jsx)(I,{}),canMakePayment:()=>!0,ariaLabel:w,supports:{features:j.supports,showSaveOption:j?.oneclick&&j?.IP,showSavedCards:null!==(x=j.showSaveOption)&&void 0!==x&&x}};(0,r.registerPaymentMethod)(N)})();