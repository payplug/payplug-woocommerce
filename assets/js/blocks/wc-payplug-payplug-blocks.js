(()=>{"use strict";var e={563:(e,a,t)=>{t.d(a,{e:()=>l,n:()=>s});var r=t(703),n=t(428),d=t.n(n);const i=(0,r.getSetting)("payplug_data",{}),s=(e,a,t)=>{const r={order_id:t,"woocommerce-process-checkout-nonce":i.wp_nonce,gateway:a?.payment_method};return new Promise(((e,a)=>d().ajax({type:"POST",data:r,url:i.payplug_create_intent_payment}).success((function(a){e(a)})).error((function(e){a(e)}))))},l=e=>new Promise(((a,t)=>{d().ajax({type:"POST",data:e,url:i.payplug_integrated_payment_check_payment_url}).success((function(e){a(e)})).error((function(e){t(e)}))}))},788:(e,a,t)=>{t.d(a,{A:()=>m});var r=t(703),n=t(609),d=t(848);const i=(0,r.getSetting)("payplug_data",{}),s=jQuery;var l={input:{"font-size":"1em","background-color":"transparent"},"::placeholder":{"font-size":"1em",color:"#777","font-style":"italic"},":invalid":{color:"#FF0000","font-size":"1em"}};const p=void 0!==hosted_fields_params.HOSTED_FIELD_MID?hosted_fields_params.HOSTED_FIELD_MID:{api_key_id:null,api_key:null};let o="";var c={hfields:"undefined"!=typeof dalenys?dalenys.hostedFields({key:{id:p.api_key_id,value:p.api_key},fields:{card:{id:"card-container",placeholder:i?.payplug_integrated_payment_card_number,enableAutospacing:!0,style:l,onInput:function(e){void 0!==e.cardType&&(o=e.cardType,s('input[type="radio"][name="schemeOptions"][value="'+e.cardType+'"]').attr("checked",!0)),s(".IntegratedPayment_error.-pan .americanExpress").addClass("-hide"),c.handleInvalidFieldErrors(e,s(".IntegratedPayment_error.-pan .invalidField")),"american_express"==o&&(e.type="invalid",c.handleInvalidFieldErrors(e,s(".IntegratedPayment_error.-pan .americanExpress")))}},expiry:{id:"expiry-container",placeholder:i?.payplug_integrated_payment_expiration_date,style:l,onInput:function(e){c.handleInvalidFieldErrors(e,s(".IntegratedPayment_error.-exp .invalidField"))}},cryptogram:{id:"cvv-container",placeholder:i?.payplug_integrated_payment_cvv,style:l,onInput:function(e){c.handleInvalidFieldErrors(e,s(".IntegratedPayment_error.-cvv .invalidField"))}}}}):null,handleInvalidFieldErrors:function(e,a){"invalid"===e.type&&(a.removeClass("-hide"),a.parent().removeClass("-hide")),"valid"!==e.type&&"empty"!==e.type||(a.addClass("-hide"),a.parent().addClass("-hide"))},showInputErrorBorder:function(e,a){s(e).addClass("hosted-fields-invalid-state"),s(a).removeClass("-hide"),s(a).parent().removeClass("-hide")},hideInputErrorBorder:function(e,a){s(e).removeClass("hosted-fields-invalid-state"),s(a).addClass("-hide"),s(a).parent().addClass("-hide")},validateInput:function(e,a){return s(e).val().length<5&&s(e).val().length>0?(c.showInputErrorBorder(e,a),!1):(c.hideInputErrorBorder(e,a),!0)},submitValidation:function(e,a){return"american_express"!=o&&(s(e).val().length<1?(c.showInputErrorBorder(e,a),!1):(c.hideInputErrorBorder(e,a),!0))}};let y=!1;const m="undefined"!=typeof dalenys?({props:e})=>{const{eventRegistration:a,emitResponse:t}=e;y=e.shouldSavePayment;const{onCheckoutValidation:r,onPaymentProcessing:l}=a;return(0,n.useEffect)((()=>{c.hfields.load(),s("[name=hosted-fields-cardHolder]").on("input",(function(e){c.validateInput(e.target,s(".IntegratedPayment_error.-cardHolder .invalidField"))}))}),[]),(0,n.useEffect)((()=>{const e=l((()=>{const e=document.getElementById("hf-token").value,a=document.getElementById("saved_card").value,r=document.getElementById("card-last4").value,n=document.getElementById("card-expiry").value;return{type:t.responseTypes.SUCCESS,meta:{paymentMethodData:{hftoken:e,savedCard:a,cardLast4:r,cardExpiry:n}}}}));return()=>{e()}}),[l]),(0,n.useEffect)((()=>{const e=r((async()=>{try{return"0000"===(await async function(){return new Promise(((e,a)=>{c.hfields.createToken((function(t){c.submitValidation(s("[name=hosted-fields-cardHolder]"),s(".IntegratedPayment_error.-cardHolder .invalidField"))&&"0000"==t.execCode?(document.getElementById("hf-token").value=t.hfToken,document.getElementById("card-last4").value=t.cardCode?t.cardCode.slice(-4):"",document.getElementById("card-expiry").value=t.cardValidityDate?t.cardValidityDate.replace("-","/"):"",e(t)):a(new Error("Tokenization failed"))}))}))}()).execCode||{errorMessage:i?.payplug_invalid_form}}catch(e){return{errorMessage:i?.payplug_invalid_form}}}));return()=>{e()}}),[r]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"payplug IntegratedPayment_container -cardHolder cardHolder-input-container","data-e2e-name":"cardHolder",children:(0,d.jsx)("p",{className:"cardHolder-container",children:(0,d.jsx)("span",{className:"input-container",id:"cardHolder-container",children:(0,d.jsx)("input",{type:"text",name:"hosted-fields-cardHolder",id:"hosted-fields-cardHolder",className:"hosted-fields hosted-fields-input-state",placeholder:i?.payplug_integrated_payment_cardholder})})})}),(0,d.jsxs)("div",{className:"payplug IntegratedPayment_error -cardHolder -hide",children:[(0,d.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:i?.payplug_integrated_payment_cardHolder_error}),(0,d.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:i?.payplug_integrated_payment_empty})]}),(0,d.jsxs)("div",{className:"payplug IntegratedPayment_container -scheme",children:[(0,d.jsx)("div",{children:i?.payplug_integrated_payment_your_card}),(0,d.jsxs)("div",{className:"payplug IntegratedPayment_schemes",children:[(0,d.jsxs)("label",{className:"payplug IntegratedPayment_scheme -cb",children:[(0,d.jsx)("input",{type:"radio",name:"schemeOptions",value:"cb"}),(0,d.jsx)("span",{})]}),(0,d.jsxs)("label",{className:"payplug IntegratedPayment_scheme -visa",children:[(0,d.jsx)("input",{type:"radio",name:"schemeOptions",value:"visa"}),(0,d.jsx)("span",{})]}),(0,d.jsxs)("label",{className:"payplug IntegratedPayment_scheme -mastercard",children:[(0,d.jsx)("input",{type:"radio",name:"schemeOptions",value:"mastercard"}),(0,d.jsx)("span",{})]})]})]}),(0,d.jsx)("div",{className:"payplug IntegratedPayment_container -pan pan-input-container","data-e2e-name":"pan",children:(0,d.jsx)("span",{className:"input-container",id:"card-container"})}),(0,d.jsxs)("div",{className:"payplug IntegratedPayment_error -pan -hide",children:[(0,d.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:i?.payplug_integrated_payment_pan_error}),(0,d.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:i?.payplug_integrated_payment_empty}),(0,d.jsx)("span",{className:"-hide americanExpress","data-e2e-error":"americanExpress",children:i?.payplug_integrated_payment_amex})]}),(0,d.jsx)("div",{className:"payplug IntegratedPayment_container -exp exp-input-container","data-e2e-name":"expiration",children:(0,d.jsx)("span",{className:"input-container",id:"expiry-container"})}),(0,d.jsx)("div",{className:"payplug IntegratedPayment_container -cvv cvv-input-container","data-e2e-name":"cvv",children:(0,d.jsx)("span",{className:"input-container",id:"cvv-container"})}),(0,d.jsxs)("div",{className:"payplug IntegratedPayment_error -exp -hide",children:[(0,d.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:i?.payplug_integrated_payment_exp_error}),(0,d.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:i?.payplug_integrated_payment_empty})]}),(0,d.jsxs)("div",{className:"payplug IntegratedPayment_error -cvv -hide",children:[(0,d.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:i?.payplug_integrated_payment_cvv_error}),(0,d.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:i?.payplug_integrated_payment_empty})]}),(0,d.jsx)("div",{className:"payplug IntegratedPayment_error -payment",children:(0,d.jsx)("span",{children:i?.payplug_integrated_payment_error})}),(0,d.jsxs)("div",{className:"payplug IntegratedPayment_container -transaction",children:[(0,d.jsx)("img",{className:"lock-icon",src:i?.lock}),(0,d.jsx)("label",{className:"transaction-label",children:i?.payplug_integrated_payment_transaction_secure}),(0,d.jsx)("img",{className:"payplug-logo",src:i?.logo})]}),(0,d.jsx)("div",{className:"payplug IntegratedPayment_container -privacy-policy",children:(0,d.jsx)("a",{href:i?.payplug_integrated_payment_privacy_policy_url,target:"_blank",children:i?.payplug_integrated_payment_privacy_policy})}),(0,d.jsx)("input",{type:"hidden",name:"hf-token",id:"hf-token"}),(0,d.jsx)("input",{type:"hidden",name:"saved_card",id:"saved_card",value:y?"1":"0"}),(0,d.jsx)("input",{type:"hidden",name:"card-last4",id:"card-last4"}),(0,d.jsx)("input",{type:"hidden",name:"card-expiry",id:"card-expiry"})]})}:null},642:(e,a,t)=>{t.d(a,{A:()=>o});var r=t(703),n=t(609),d=t(143),i=t(563),s=t(848);const l=(0,r.getSetting)("payplug_data",{});let p=!1;const o=({props:e})=>{const{eventRegistration:a,emitResponse:t}=e;p=e.shouldSavePayment;const{onCheckoutValidation:r,onPaymentSetup:o,onCheckoutSuccess:c}=a,{PAYMENT_STORE_KEY:y,CHECKOUT_STORE_KEY:m}=window.wc.wcBlocksData,u=(0,d.useSelect)((e=>e(m).getOrderId()));(0,n.useEffect)((()=>{g.api=new Payplug.IntegratedPayment(1!=l?.mode),g.api.setDisplayMode3ds(Payplug.DisplayMode3ds.LIGHTBOX),g.form.cardHolder=g.api.cardHolder(document.querySelector(".cardHolder-input-container"),{default:g.inputStyle.default,placeholder:l?.payplug_integrated_payment_cardholder}),g.form.pan=g.api.cardNumber(document.querySelector(".pan-input-container"),{default:g.inputStyle.default,placeholder:l?.payplug_integrated_payment_card_number}),g.form.cvv=g.api.cvv(document.querySelector(".cvv-input-container"),{default:g.inputStyle.default,placeholder:l?.payplug_integrated_payment_cvv}),g.form.exp=g.api.expiration(document.querySelector(".exp-input-container"),{default:g.inputStyle.default,placeholder:l?.payplug_integrated_payment_expiration_date}),g.scheme=g.api.getSupportedSchemes(),_()}),[]),(0,n.useEffect)((()=>{const e=r((async()=>{g.api.validateForm();let e=!1;return await new Promise((async(e,a)=>{await g.api.onValidateForm((({isFormValid:a})=>{e(a)}))})).then((a=>{e=a})),e||{errorMessage:l?.payplug_invalid_form}}));return()=>{e()}}),[r]),(0,n.useEffect)((()=>{const a=o((async()=>{let a={};await(0,i.n)(e,l,u).then((async e=>{g.paymentId=e.data.payment_id,a={payment_id:e.data.payment_id},g.return_url=e.data.redirect;try{g.api.onCompleted((function(e){(0,i.e)({payment_id:e.token}).then((e=>{window.location=g.return_url}))})),await g.api.pay(g.paymentId,Payplug.Scheme.AUTO,{save_card:p})}catch(e){return{type:"error",message:e.message}}}))}));return()=>{a()}}),[o]);const _=()=>{jQuery.each(g.form,(function(e,a){a.onChange((function(a){a.error?(document.querySelector(".payplug.IntegratedPayment_error.-"+e).classList.remove("-hide"),document.querySelector("."+e+"-input-container").classList.add("-invalid"),"FIELD_EMPTY"===a.error.name?(document.querySelector(".payplug.IntegratedPayment_error.-"+e).querySelector(".emptyField").classList.remove("-hide"),document.querySelector(".payplug.IntegratedPayment_error.-"+e).querySelector(".invalidField").classList.add("-hide")):(document.querySelector(".payplug.IntegratedPayment_error.-"+e).querySelector(".invalidField").classList.remove("-hide"),document.querySelector(".payplug.IntegratedPayment_error.-"+e).querySelector(".emptyField").classList.add("-hide"))):(document.querySelector(".payplug.IntegratedPayment_error.-"+e).classList.add("-hide"),document.querySelector("."+e+"-input-container").classList.remove("-invalid"),document.querySelector(".payplug.IntegratedPayment_error.-"+e).querySelector(".invalidField").classList.add("-hide"),document.querySelector(".payplug.IntegratedPayment_error.-"+e).querySelector(".emptyField").classList.add("-hide"),g.fieldsValid[e]=!0,g.fieldsEmpty[e]=!1)}))}))};var g={cartId:null,paymentId:null,paymentOptionId:null,form:{},checkoutForm:null,api:null,integratedPayment:null,token:null,notValid:!0,fieldsValid:{cardHolder:!1,pan:!1,cvv:!1,exp:!1},fieldsEmpty:{cardHolder:!0,pan:!0,cvv:!0,exp:!0},inputStyle:{default:{color:"#2B343D",fontFamily:"Poppins, sans-serif",fontSize:"14px",textAlign:"left","::placeholder":{color:"#969a9f"},":focus":{color:"#2B343D"}},invalid:{color:"#E91932"}},save_card:!1,scheme:null,query:null,submit:null,order_review:!1,return_url:null};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{id:"payplug-integrated-payment",className:"payplug IntegratedPayment -loaded",children:[(0,s.jsx)("div",{className:"payplug IntegratedPayment_container -cardHolder cardHolder-input-container","data-e2e-name":"cardHolder"}),(0,s.jsxs)("div",{className:"payplug IntegratedPayment_error -cardHolder -hide",children:[(0,s.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:l?.payplug_integrated_payment_cardHolder_error}),(0,s.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:l?.payplug_integrated_payment_empty})]}),(0,s.jsxs)("div",{className:"payplug IntegratedPayment_container -scheme",children:[(0,s.jsx)("div",{children:l?.payplug_integrated_payment_your_card}),(0,s.jsxs)("div",{className:"payplug IntegratedPayment_schemes",children:[(0,s.jsxs)("label",{className:"payplug IntegratedPayment_scheme -cb",children:[(0,s.jsx)("input",{type:"radio",name:"schemeOptions",value:"cb"}),(0,s.jsx)("span",{})]}),(0,s.jsxs)("label",{className:"payplug IntegratedPayment_scheme -visa",children:[(0,s.jsx)("input",{type:"radio",name:"schemeOptions",value:"visa"}),(0,s.jsx)("span",{})]}),(0,s.jsxs)("label",{className:"payplug IntegratedPayment_scheme -mastercard",children:[(0,s.jsx)("input",{type:"radio",name:"schemeOptions",value:"mastercard"}),(0,s.jsx)("span",{})]})]})]}),(0,s.jsx)("div",{className:"payplug IntegratedPayment_container -pan pan-input-container","data-e2e-name":"pan"}),(0,s.jsxs)("div",{className:"payplug IntegratedPayment_error -pan -hide",children:[(0,s.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:l?.payplug_integrated_payment_pan_error}),(0,s.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:l?.payplug_integrated_payment_empty})]}),(0,s.jsx)("div",{className:"payplug IntegratedPayment_container -exp exp-input-container","data-e2e-name":"expiration"}),(0,s.jsx)("div",{className:"payplug IntegratedPayment_container -cvv cvv-input-container","data-e2e-name":"cvv"}),(0,s.jsxs)("div",{className:"payplug IntegratedPayment_error -exp -hide",children:[(0,s.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:l?.payplug_integrated_payment_exp_error}),(0,s.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:l?.payplug_integrated_payment_empty})]}),(0,s.jsxs)("div",{className:"payplug IntegratedPayment_error -cvv -hide",children:[(0,s.jsx)("span",{className:"-hide invalidField","data-e2e-error":"invalidField",children:l?.payplug_integrated_payment_cvv_error}),(0,s.jsx)("span",{className:"-hide emptyField","data-e2e-error":"paymentError",children:l?.payplug_integrated_payment_empty})]}),(0,s.jsx)("div",{className:"payplug IntegratedPayment_error -payment",children:(0,s.jsx)("span",{children:l?.payplug_integrated_payment_error})}),(0,s.jsxs)("div",{className:"payplug IntegratedPayment_container -transaction",children:[(0,s.jsx)("img",{className:"lock-icon",src:l?.lock}),(0,s.jsx)("label",{className:"transaction-label",children:l?.payplug_integrated_payment_transaction_secure}),(0,s.jsx)("img",{className:"payplug-logo",src:l?.logo})]}),(0,s.jsx)("div",{className:"payplug IntegratedPayment_container -privacy-policy",children:(0,s.jsx)("a",{href:l?.payplug_integrated_payment_privacy_policy_url,target:"_blank",children:l?.payplug_integrated_payment_privacy_policy})})]})})}},20:(e,a,t)=>{var r=t(609),n=Symbol.for("react.element"),d=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function p(e,a,t){var r,d={},p=null,o=null;for(r in void 0!==t&&(p=""+t),void 0!==a.key&&(p=""+a.key),void 0!==a.ref&&(o=a.ref),a)i.call(a,r)&&!l.hasOwnProperty(r)&&(d[r]=a[r]);if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===d[r]&&(d[r]=a[r]);return{$$typeof:n,type:e,key:p,ref:o,props:d,_owner:s.current}}a.Fragment=d,a.jsx=p,a.jsxs=p},848:(e,a,t)=>{e.exports=t(20)},609:e=>{e.exports=window.React},428:e=>{e.exports=window.jQuery},703:e=>{e.exports=window.wc.wcSettings},143:e=>{e.exports=window.wp.data}},a={};function t(r){var n=a[r];if(void 0!==n)return n.exports;var d=a[r]={exports:{}};return e[r](d,d.exports,t),d.exports}t.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},t.d=(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a);const r=window.wp.i18n,n=window.wc.wcBlocksRegistry,d=window.wp.htmlEntities;var i=t(703),s=t(609),l=t(143),p=t(563),o=t(848);(0,i.getSetting)("payplug_data",{});const c=({props:e,settings:a})=>{const{eventRegistration:t,emitResponse:r,shouldSavePayment:n}=e,{onPaymentSetup:d,onCheckoutSuccess:i}=t,{CHECKOUT_STORE_KEY:c}=window.wc.wcBlocksData,y=(0,l.useSelect)((e=>e(c).getOrderId()));let m;return(0,s.useEffect)((()=>{const t=d((async()=>(await(0,p.n)(e,a,y).then((async e=>{m=e})),{type:"success"})));return()=>{t()}}),[n,d,r.noticeContexts.PAYMENTS,r.responseTypes.ERROR,r.responseTypes.SUCCESS]),(0,s.useEffect)((()=>{const e=i((async({processingResponse:{paymentDetails:e}})=>{await function(e){return new Promise((async(a,t)=>{try{window.redirection_url=e.data.cancel||!1,await Payplug.showPayment(e.data.redirect)}catch(e){t(e)}}))}(m).then((()=>({type:"error",message:"Timeout",messageContext:r.noticeContexts.PAYMENTS})))}));return()=>{e()}}),[i]),(0,o.jsx)(o.Fragment,{})};var y;let m;m=hosted_fields_params.USE_HOSTED_FIELDS?t(788).A:t(642).A;const u=(0,i.getSetting)("payplug_data",{}),_=(0,r.__)("Gateway method title","payplug"),g=(0,d.decodeEntities)(u?.title)||_,h=e=>!0===u?.IP&&m?(0,o.jsx)(m,{settings:u,props:e}):!0===u?.popup?(0,o.jsx)(c,{settings:u,props:e}):window.wp.htmlEntities.decodeEntities(u?.description||""),v=()=>(0,o.jsxs)("span",{style:{width:"100%"},children:[g,(0,o.jsx)(x,{})]}),x=()=>(0,o.jsx)("img",{src:u?.icon.src,alt:u?.icon.icon_alt,className:"payplug-payment-icon",style:{float:"right"}}),f={name:"payplug",label:(0,o.jsx)(v,{}),content:(0,o.jsx)(h,{}),edit:(0,o.jsx)(h,{}),canMakePayment:()=>!0,ariaLabel:g,supports:{features:u.supports,showSaveOption:u?.oneclick&&u?.IP,showSavedCards:null!==(y=u.showSaveOption)&&void 0!==y&&y}};(0,n.registerPaymentMethod)(f)})();