{"version":3,"file":"wc-payplug-apple_pay-blocks.js","mappings":"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","sources":["webpack://payplug/./resources/js/frontend/helper/wc-payplug-apple_pay-requests.js","webpack://payplug/./resources/js/frontend/wc-payplug-apple_pay_cart-blocks.js","webpack://payplug/external window \"React\"","webpack://payplug/external window \"jQuery\"","webpack://payplug/external window [\"wc\",\"wcBlocksRegistry\"]","webpack://payplug/external window [\"wc\",\"wcSettings\"]","webpack://payplug/external window [\"wp\",\"data\"]","webpack://payplug/external window [\"wp\",\"element\"]","webpack://payplug/external window [\"wp\",\"htmlEntities\"]","webpack://payplug/external window [\"wp\",\"i18n\"]","webpack://payplug/webpack/bootstrap","webpack://payplug/webpack/runtime/compat get default export","webpack://payplug/webpack/runtime/define property getters","webpack://payplug/webpack/runtime/hasOwnProperty shorthand","webpack://payplug/webpack/runtime/make namespace object","webpack://payplug/./resources/js/frontend/wc-payplug-apple_pay-blocks.js"],"sourcesContent":["import { getSetting } from '@woocommerce/settings';\nimport $ from 'jquery';\nconst settings = getSetting('apple_pay_data', {});\n\nexport const getPayment = (props, order_id) => {\n\tconst data = getPaymentData(props);\n\treturn new Promise((resolve, reject) => {\n\t\treturn $.ajax({\n\t\t\ttype: 'POST',\n\t\t\tdata: data,\n\t\t\turl: settings.payplug_create_intent_payment,\n\t\t}).success(function (response) {\n\t\t\tresolve(response);\n\n\t\t}).error(function (error) {\n\t\t\treject(error);\n\n\t\t});\n\t});\n\n\tfunction getPaymentData(props) {\n\t\treturn {\n\t\t\t\"order_id\": order_id,\n\t\t\t\"woocommerce-process-checkout-nonce\": settings.wp_nonce,\n\t\t\t\"gateway\": \"apple_pay\"\n\t\t}\n\t}\n};\n\nexport const apple_pay_update_payment = (data) => {\n\treturn new Promise((resolve, reject) => {\n\t\t$.ajax({\n\t\t\ttype: 'POST',\n\t\t\tdata: data,\n\t\t\turl: settings.ajax_url_applepay_update_payment\n\t\t}).success(function (response) {\n\t\t\tresolve(response);\n\n\t\t}).error(function (xhr, status, error) {\n\t\t\treject(error); // NOT WORKING!!\n\n\t\t});\n\t});\n}\n\nexport const apple_pay_UpdateOrder = (data) =>{\n\treturn new Promise((resolve, reject) => {\n\t\t$.ajax({\n\t\t\ttype: 'POST',\n\t\t\tdata: data,\n\t\t\turl: settings.ajax_url_update_applepay_order\n\t\t}).success(function (response) {\n\t\t\tresolve(response);\n\n\t\t}).error(function (xhr, status, error) {\n\t\t\treject(error); // NOT WORKING!!\n\t\t});\n\t});\n}\n\nexport const apple_pay_Payment = (data) =>{\n\treturn new Promise((resolve, reject) => {\n\t\t$.ajax({\n\t\t\ttype: 'POST',\n\t\t\tdata: data,\n\t\t\turl: settings.ajax_url_update_applepay_payment\n\t\t}).success(function (response) {\n\t\t\tresolve(response);\n\n\t\t}).error(function (xhr, status, error) {\n\t\t\treject(error); // NOT WORKING!!\n\t\t});\n\t});\n}\n\nexport const apple_pay_PlaceOrderWithDummyData = (data) =>{\n\treturn new Promise((resolve, reject) => {\n\t\t$.ajax({\n\t\t\ttype: 'POST',\n\t\t\tdata: data,\n\t\t\turl: settings.ajax_url_place_order_with_dummy_data\n\t\t}).success(function (response) {\n\t\t\tresolve(response);\n\n\t\t}).error(function (xhr, status, error) {\n\t\t\treject(error); // NOT WORKING!!\n\t\t});\n\t});\n}\n\nexport const apple_pay_CancelOrder = (data) =>{\n\treturn new Promise((resolve, reject) => {\n\t\t$.ajax({\n\t\t\ttype: 'POST',\n\t\t\tdata: data,\n\t\t\turl: settings.ajax_url_applepay_cancel_order\n\t\t}).success(function (response) {\n\t\t\tresolve(response);\n\n\t\t}).error(function (xhr, status, error) {\n\t\t\treject(error); // NOT WORKING!!\n\t\t});\n\t});\n}\n\n","import React from 'react';\nimport { getSetting } from '@woocommerce/settings';\nimport { apple_pay_CancelOrder, apple_pay_Payment, apple_pay_PlaceOrderWithDummyData, apple_pay_UpdateOrder} from \"./helper/wc-payplug-apple_pay-requests\";\nconst settings = getSetting( 'apple_pay_data', {} );\n\nconst ApplePayCart = ( props ) =>{\n\n\tlet session = null;\n\tlet apple_pay_Session_status = null;\n\tconst apple_pay_wrapper = jQuery(\"#apple-pay-button-wrapper\");\n\tconst apple_pay = {\n\t\tload_order_total: false,\n\t\tOrderPaymentCreated: function (response) {\n\t\t\tif ('success' !== response.payment_data.result) {\n\t\t\t\tapple_pay.CancelOrder();\n\t\t\t}\n\n\t\t\tapple_pay.BeginSession(response)\n\t\t},\n\t\tCreateSession: function () {\n\t\t\tconst request = {\n\t\t\t\t\"countryCode\": settings.countryCode,\n\t\t\t\t\"currencyCode\": settings.currencyCode,\n\t\t\t\t\"merchantCapabilities\": [\n\t\t\t\t\t\"supports3DS\"\n\t\t\t\t],\n\t\t\t\t\"supportedNetworks\": [\n\t\t\t\t\t\"visa\",\n\t\t\t\t\t\"masterCard\"\n\t\t\t\t],\n\t\t\t\t\"total\": {\n\t\t\t\t\t\"label\": \"Apple Pay\",\n\t\t\t\t\t\"type\": \"final\",\n\t\t\t\t\t\"amount\": settings.total_amount/100\n\t\t\t\t},\n\t\t\t\t'applicationData': btoa(JSON.stringify({\n\t\t\t\t\t'apple_pay_domain': settings.apple_pay_domain\n\t\t\t\t})),\n\t\t\t\t'requiredBillingContactFields' : [\n\t\t\t\t\t'postalAddress',\n\t\t\t\t\t'name',\n\t\t\t\t],\n\t\t\t}\n\t\t\trequest.requiredShippingContactFields = [\n\t\t\t\t\"postalAddress\",\n\t\t\t\t\"name\",\n\t\t\t\t\"phone\",\n\t\t\t\t\"email\"\n\t\t\t];\n\n\t\t\tif (settings.payplug_apple_pay_shipping_required) {\n\n\t\t\t\trequest.shippingMethods = settings.payplug_carriers;\n\n\t\t\t}\n\t\t\tsession = new ApplePaySession(3, request);\n\n\t\t},\n\t\tCancelOrder: function () {\n\t\t\tsession.oncancel = event => {\n\t\t\t\tapple_pay_CancelOrder({'order_id': session.order_id, 'payment_id': session.payment_id}).then(() => {\n\t\t\t\t\tenabled_button();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tBeginSession: function (response) {\n\t\t\tsession.payment_id = response.payment_data.payment_id\n\t\t\tsession.order_id = response.order_id\n\t\t\tsession.cancel_url = response.payment_data.cancel_url\n\t\t\tsession.return_url = response.payment_data.return_url\n\t\t\tapple_pay.MerchantValidated(session, response.payment_data.merchant_session);\n\n\t\t\tsession.amount = parseFloat(settings.total/100) * 100;\n\t\t\tsession.onshippingmethodselected = event => {\n\n\t\t\t\tconst shippingMethod = event.shippingMethod;\n\t\t\t\tsession.shippingMethod = shippingMethod.identifier;\n\n\t\t\t\tconst baseTotal = settings.total/100 ;\n\t\t\t\tlet currentShippingCost = shippingMethod.amount;\n\n\t\t\t\tconst newTotalAmount = parseFloat(baseTotal) + parseFloat(currentShippingCost);\n\t\t\t\tsession.amount = newTotalAmount * 100;\n\n\t\t\t\tconst update = {\n\t\t\t\t\tnewTotal: {\n\t\t\t\t\t\tlabel: 'Total',\n\t\t\t\t\t\tamount: newTotalAmount\n\t\t\t\t\t},\n\t\t\t\t\tnewLineItems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: shippingMethod.label,\n\t\t\t\t\t\t\ttype: 'final',\n\t\t\t\t\t\t\tamount: currentShippingCost\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t};\n\n\t\t\t\tsession.completeShippingMethodSelection(update);\n\t\t\t};\n\t\t\tsession.begin();\n\t\t},\n\t\tMerchantValidated: function(session, merchant_session) {\n\t\t\tsession.onvalidatemerchant = event => {\n\t\t\t\ttry {\n\t\t\t\t\tsession.completeMerchantValidation(merchant_session);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tapple_pay.CancelOrder();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tAddErrorMessage: function(message){\n\t\t\tapple_pay_wrapper.append(jQuery('<div class=\"apple-pay-cart-notice\"></div>').append(\"<span>\" + message + \"</span>\"));\n\t\t},\n\t\tDeleteErrorMessage: function(){\n\t\t\tsetTimeout(function () {\n\t\t\t\tjQuery('.apple-pay-cart-notice').contents().first().remove();\n\t\t\t}, 4000);\n\t\t}\n\t}\n\n\tfunction CheckPaymentOnPaymentAuthorized() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsession.onpaymentauthorized = event => {\n\t\t\t\tlet event_data = event.payment;\n\n\t\t\t\tlet data = {\n\t\t\t\t\t'order_id': session.order_id,\n\t\t\t\t\t'shipping' : event_data.shippingContact,\n\t\t\t\t\t'billing' : event_data.billingContact,\n\t\t\t\t\t'shipping_method' : session.shippingMethod\n\t\t\t\t};\n\n\t\t\t\tapple_pay_UpdateOrder(data).then( (result_order) => {\n\t\t\t\t\tdata = {\n\t\t\t\t\t\t'action': 'applepay_update_payment',\n\t\t\t\t\t\t'post_type': 'POST',\n\t\t\t\t\t\t'payment_id': session.payment_id,\n\t\t\t\t\t\t'payment_token': event.payment.token,\n\t\t\t\t\t\t'order_id': session.order_id,\n\t\t\t\t\t\t'amount': session.amount\n\t\t\t\t\t}\n\n\t\t\t\t\tapple_pay_Payment(data).then((result_payment) => {\n\n\t\t\t\t\t\tapple_pay_Session_status = ApplePaySession.STATUS_SUCCESS;\n\n\t\t\t\t\t\tif (result_payment.success !== true) {\n\t\t\t\t\t\t\tapple_pay_Session_status = ApplePaySession.STATUS_FAILURE;\n\t\t\t\t\t\t\tapple_pay.AddErrorMessage(result_payment.data.message)\n\t\t\t\t\t\t\tapple_pay.DeleteErrorMessage();\n\t\t\t\t\t\t\tapple_pay.CancelOrder()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsession.completePayment({\"status\": apple_pay_Session_status})\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t}\n\n\tjQuery(function ($) {\n\t\tjQuery('apple-pay-button').on(\"click\", (e) => {\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\t\t\tdisabled_button();\n\n\t\t\tapple_pay.CreateSession();\n\t\t\tapple_pay.CancelOrder();\n\t\t\tapple_pay_PlaceOrderWithDummyData().then(async (response) => {\n\t\t\t\tif (response.success === false) {\n\t\t\t\t\tapple_pay.AddErrorMessage(response.data.message)\n\t\t\t\t\tapple_pay.DeleteErrorMessage();\n\t\t\t\t\tenabled_button();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsettings.total = response.total\n\t\t\t\tapple_pay.OrderPaymentCreated(response);\n\n\t\t\t\tawait CheckPaymentOnPaymentAuthorized().then((res) => {\n\t\t\t\t\twindow.location = session.return_url\n\t\t\t\t});\n\n\t\t\t});\n\t\t});\n\t});\n\n\tfunction disabled_button(){\n\t\tjQuery('apple-pay-button').addClass(\"isDisabled\");\n\t}\n\n\tfunction enabled_button(){\n\t\tjQuery('apple-pay-button').removeClass(\"isDisabled\");\n\t}\n\n\treturn (<> </>);\n}\n\nexport default ApplePayCart;\n","module.exports = window[\"React\"];","module.exports = window[\"jQuery\"];","module.exports = window[\"wc\"][\"wcBlocksRegistry\"];","module.exports = window[\"wc\"][\"wcSettings\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { __ } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { useSelect } from '@wordpress/data';\nimport { getSetting } from '@woocommerce/settings';\nimport { registerPaymentMethod, registerExpressPaymentMethod } from '@woocommerce/blocks-registry';\nimport {useEffect} from \"react\";\nimport {apple_pay_update_payment, getPayment} from \"./helper/wc-payplug-apple_pay-requests\";\nimport ApplePayCart from './wc-payplug-apple_pay_cart-blocks';\n\nconst settings = getSetting( 'apple_pay_data', {} );\nconst defaultLabel = __('Gateway method title', 'payplug');\nconst label = decodeEntities( settings?.title ) || defaultLabel;\n\nconst Content = (props) => {\n\n\tconst { eventRegistration, emitResponse } = props;\n\tconst { onPaymentSetup, onCheckoutSuccess} = eventRegistration;\n\tconst { CHECKOUT_STORE_KEY } = window.wc.wcBlocksData;\n\tconst order_id = useSelect( ( select ) => select( CHECKOUT_STORE_KEY ).getOrderId() );\n\tlet session = null;\n\n\tuseEffect(() => {\n\t\tjQuery(function ($) {\n\t\t\tlet element = $(\"form .wp-block-woocommerce-checkout-actions-block .wc-block-components-button\");\n\t\t\telement.on(\"click\", async (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tapple_pay.CreateSession();\n\t\t\t\tapple_pay.CancelOrder();\n\t\t\t});\n\t\t});\n\t},[]);\n\n\n\n\tuseEffect(() => {\n\t\tconst handlePaymentProcessing = async () => {\n\n\t\t\tawait getPayment(props, order_id).then(async (response) => {\n\t\t\t\tawait apple_pay.BeginSession(response);\n\n\t\t\t}).then( async ( response) => {\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"success\"\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\n\t\tconst unsubscribeAfterProcessing = onPaymentSetup(handlePaymentProcessing);\n\t\treturn () => { unsubscribeAfterProcessing(); };\n\n\t}, [\n\t\tonPaymentSetup,\n\t\temitResponse.noticeContexts.PAYMENTS,\n\t\temitResponse.responseTypes.ERROR,\n\t\temitResponse.responseTypes.SUCCESS\n\t]);\n\n\tuseEffect(() => {\n\t\tconst handlePaymentProcessing = async ({processingResponse: {paymentDetails}}) => {\n\n\t\t\tvar apple_pay_Session_status;\n\t\t\tlet result = {};\n\n\t\t\tawait CheckPaymentOnPaymentAuthorized().then( () => {\n\t\t\t\tresult = {\n\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\"redirectUrl\": session.return_url,\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn result;\n\n\t\t\tfunction CheckPaymentOnPaymentAuthorized(){\n\t\t\t\treturn new Promise((resolve, reject) => {\n\n\t\t\t\t\tsession.onpaymentauthorized = async event => {\n\t\t\t\t\t\tlet data = {\n\t\t\t\t\t\t\t'action': 'applepay_update_payment',\n\t\t\t\t\t\t\t'post_type': 'POST',\n\t\t\t\t\t\t\t'payment_id': session.payment_id,\n\t\t\t\t\t\t\t'payment_token': event.payment.token,\n\t\t\t\t\t\t\t'order_id': session.order_id\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tawait apple_pay_update_payment(data).then( (res) => {\n\t\t\t\t\t\t\tapple_pay_Session_status = ApplePaySession.STATUS_SUCCESS;\n\n\t\t\t\t\t\t\tif (res.success !== true) {\n\t\t\t\t\t\t\t\tapple_pay_Session_status = ApplePaySession.STATUS_FAILURE;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsession.completePayment({\"status\": apple_pay_Session_status})\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t}\n\t\tconst unsubscribeAfterProcessing = onCheckoutSuccess(handlePaymentProcessing);\n\t\treturn () => { unsubscribeAfterProcessing(); };\n\n\t}, [\n\t\tonCheckoutSuccess\n\t]);\n\n\tlet apple_pay = {\n\t\tCreateSession: function () {\n\t\t\tconst request = {\n\t\t\t\t\"countryCode\": settings.payplug_countryCode,\n\t\t\t\t\"currencyCode\": settings.payplug_currencyCode,\n\t\t\t\t\"merchantCapabilities\": [\n\t\t\t\t\t\"supports3DS\"\n\t\t\t\t],\n\t\t\t\t\"supportedNetworks\": [\n\t\t\t\t\t\"visa\",\n\t\t\t\t\t\"masterCard\"\n\t\t\t\t],\n\t\t\t\t\"total\": {\n\t\t\t\t\t\"label\": \"Apple Pay\",\n\t\t\t\t\t\"type\": \"final\",\n\t\t\t\t\t\"amount\": props.billing.cartTotal.value/100\n\t\t\t\t},\n\t\t\t\t'applicationData': btoa(JSON.stringify({\n\t\t\t\t\t'apple_pay_domain': settings.payplug_apple_pay_domain\n\t\t\t\t}))\n\t\t\t}\n\n\t\t\tsession = new ApplePaySession(3, request)\n\t\t},\n\t\tCancelOrder: function () {\n\t\t\tsession.oncancel = event => {\n\t\t\t\twindow.location = session.cancel_url\n\t\t\t}\n\t\t},\n\t\tBeginSession: function (response) {\n\t\t\tsession.payment_id = response.data.payment_id;\n\t\t\tsession.order_id = order_id\n\t\t\tsession.cancel_url = response.data.cancel;\n\t\t\tsession.return_url = response.data.redirect;\n\t\t\tapple_pay.MerchantValidated(session, response.data.merchant_session)\n\t\t\tsession.begin()\n\t\t},\n\t\tMerchantValidated: function(session, merchant_session) {\n\t\t\tsession.onvalidatemerchant = async event => {\n\t\t\t\ttry {\n\t\t\t\t\tsession.completeMerchantValidation(merchant_session)\n\t\t\t\t} catch (err) {\n\t\t\t\t\talert(err)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (\n\t\t<></>\n\t)\n\n};\n/**\n * Label component\n *\n */\nconst Label = () => {\n\treturn (\n\t\t<span style={{ width: '100%' }}>\n            {label}\n\t\t\t<Icon />\n        </span>\n\t)\n}\n\nconst Icon = () => {\n\treturn (\n\t\t<img src={settings?.icon.src} alt={settings?.icon.icon_alt} className=\"payplug-payment-icon\" style={{float: 'right'}}/>\n\t)\n}\n\n/**\n * Payplug payment method config object.\n */\nconst ApplePay = {\n\tname: \"apple_pay\",\n\tlabel: <Label />,\n\tcontent: <Content />,\n\tedit: <Content />,\n\tcanMakePayment: () => {return true},\n\tariaLabel: label,\n\tsupports: {\n\t\tfeatures: settings.supports\n\t},\n};\n\n/**\n *\n * @param props\n * @returns {JSX.Element}\n * @Content for express payment method\n */\nconst ExpressContent = (props) => {\n\treturn (\n\t\t<>\n\t\t\t<div id=\"apple-pay-button-wrapper\">\n\t\t\t\t<apple-pay-button\n\t\t\t\t\tbuttonstyle=\"black\"\n\t\t\t\t\ttype=\"pay\"\n\t\t\t\t\tlocale={settings?.payplug_locale}\n\t\t\t\t></apple-pay-button>\n\t\t\t</div>\n\t\t\t<ApplePayCart {...props} />\n\t\t</>\n\t);\n};\n\nconst ExpressApplePay = {\n\tname: \"apple_pay\",\n\tcontent: <ExpressContent/>,\n\tedit: <ExpressContent/>,\n\tcanMakePayment: (data) => {\n\n\t\tif (!settings?.is_cart) {\n\t\t\treturn false;\n\t\t}\n\n\t\tsettings.payplug_apple_pay_shipping_required = data.cartNeedsShipping;\n\t\tsettings.total_amount = data.cartTotals.total_price;\n\n\t\tif (!data.cartNeedsShipping) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet selectedShippingMethods = data.selectedShippingMethods[0].split(\":\");\n\n\t\tsettings.payplug_carriers.forEach(function(item){\n\n\t\t\tif (item.identifier === selectedShippingMethods){\n\t\t\t\titem.selected = true;\n\t\t\t}\n\n\t\t})\n\n\t\tlet payplug_authorized_carriers = settings?.payplug_authorized_carriers;\n\t\tlet selected_shipping = data.selectedShippingMethods[0].split(\":\");\n\t\tlet authorized = false;\n\n\t\tpayplug_authorized_carriers.forEach(function(item){\n\t\t\tif (selected_shipping[0] === item){\n\t\t\t\tauthorized = true\n\t\t\t}\n\t\t});\n\n\t\treturn authorized;\n\t},\n\tpaymentMethodId: \"apple_pay\"\n\n};\n\nregisterExpressPaymentMethod( ExpressApplePay );\n\nregisterPaymentMethod( ApplePay );\n\n"],"names":["getSetting","$","settings","getPayment","props","order_id","data","getPaymentData","Promise","resolve","reject","ajax","type","url","payplug_create_intent_payment","success","response","error","wp_nonce","apple_pay_update_payment","ajax_url_applepay_update_payment","xhr","status","apple_pay_UpdateOrder","ajax_url_update_applepay_order","apple_pay_Payment","ajax_url_update_applepay_payment","apple_pay_PlaceOrderWithDummyData","ajax_url_place_order_with_dummy_data","apple_pay_CancelOrder","ajax_url_applepay_cancel_order","React","ApplePayCart","session","apple_pay_Session_status","apple_pay_wrapper","jQuery","apple_pay","load_order_total","OrderPaymentCreated","payment_data","result","CancelOrder","BeginSession","CreateSession","request","countryCode","currencyCode","total_amount","btoa","JSON","stringify","apple_pay_domain","requiredShippingContactFields","payplug_apple_pay_shipping_required","shippingMethods","payplug_carriers","ApplePaySession","oncancel","event","payment_id","then","enabled_button","cancel_url","return_url","MerchantValidated","merchant_session","amount","parseFloat","total","onshippingmethodselected","shippingMethod","identifier","baseTotal","currentShippingCost","newTotalAmount","update","newTotal","label","newLineItems","completeShippingMethodSelection","begin","onvalidatemerchant","completeMerchantValidation","err","AddErrorMessage","message","append","DeleteErrorMessage","setTimeout","contents","first","remove","CheckPaymentOnPaymentAuthorized","onpaymentauthorized","event_data","payment","shippingContact","billingContact","result_order","token","result_payment","STATUS_SUCCESS","STATUS_FAILURE","completePayment","on","e","preventDefault","stopImmediatePropagation","disabled_button","res","window","location","addClass","removeClass","createElement","Fragment","__","decodeEntities","useSelect","registerPaymentMethod","registerExpressPaymentMethod","useEffect","defaultLabel","title","Content","eventRegistration","emitResponse","onPaymentSetup","onCheckoutSuccess","CHECKOUT_STORE_KEY","wc","wcBlocksData","select","getOrderId","element","handlePaymentProcessing","unsubscribeAfterProcessing","noticeContexts","PAYMENTS","responseTypes","ERROR","SUCCESS","processingResponse","paymentDetails","payplug_countryCode","payplug_currencyCode","billing","cartTotal","value","payplug_apple_pay_domain","cancel","redirect","alert","Label","style","width","Icon","src","icon","alt","icon_alt","className","float","ApplePay","name","content","edit","canMakePayment","ariaLabel","supports","features","ExpressContent","id","buttonstyle","locale","payplug_locale","ExpressApplePay","is_cart","cartNeedsShipping","cartTotals","total_price","selectedShippingMethods","split","forEach","item","selected","payplug_authorized_carriers","selected_shipping","authorized","paymentMethodId"],"sourceRoot":""}