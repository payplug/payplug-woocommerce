(()=>{"use strict";var e={20:(e,t,n)=>{var r=n(609),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,n){var r,o={},p=null,u=null;for(r in void 0!==n&&(p=""+n),void 0!==t.key&&(p=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!i.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:s,type:e,key:p,ref:u,props:o,_owner:c.current}}t.Fragment=o,t.jsx=p,t.jsxs=p},848:(e,t,n)=>{e.exports=n(20)},609:e=>{e.exports=window.React}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const r=window.wp.i18n,s=window.wc.wcBlocksRegistry,o=window.wp.htmlEntities,a=window.wc.wcSettings;var c=n(609);const i=window.wp.data,p=window.jQuery;var u=n.n(p);const d=(0,a.getSetting)("payplug_data",{});var l=n(848);(0,a.getSetting)("payplug_data",{});const w=({props:e,settings:t})=>{const{eventRegistration:n,emitResponse:r,shouldSavePayment:s}=e,{onPaymentSetup:o,onCheckoutSuccess:a}=n,{CHECKOUT_STORE_KEY:p}=window.wc.wcBlocksData,w=(0,i.useSelect)((e=>e(p).getOrderId()));let y;return(0,c.useEffect)((()=>{const e=o((async()=>(await((e,t,n)=>{const r={order_id:n,"woocommerce-process-checkout-nonce":d.wp_nonce,gateway:t?.payment_method};return new Promise(((e,t)=>u().ajax({type:"POST",data:r,url:d.payplug_create_intent_payment}).success((function(t){e(t)})).error((function(e){t(e)}))))})(0,t,w).then((async e=>{y=e})),{type:"success"})));return()=>{e()}}),[s,o,r.noticeContexts.PAYMENTS,r.responseTypes.ERROR,r.responseTypes.SUCCESS]),(0,c.useEffect)((()=>{const e=a((async({processingResponse:{paymentDetails:e}})=>{await function(e){return new Promise((async(t,n)=>{try{window.redirection_url=e.data.cancel||!1,await Payplug.showPayment(e.data.redirect)}catch(e){n(e)}}))}(y).then((()=>({type:"error",message:"Timeout",messageContext:r.noticeContexts.PAYMENTS})))}));return()=>{e()}}),[a]),(0,l.jsx)(l.Fragment,{})},y=(0,a.getSetting)("american_express_data",{}),_=(0,r.__)("Gateway method title","payplug"),m=(0,o.decodeEntities)(y?.title)||_,f=e=>!0===y?.popup?(0,l.jsx)(w,{settings:y,props:e}):window.wp.htmlEntities.decodeEntities(y?.description||""),g=()=>(0,l.jsxs)("span",{style:{width:"100%"},children:[m,(0,l.jsx)(x,{})]}),x=()=>(0,l.jsx)("img",{src:y?.icon.src,alt:y?.icon.icon_alt,className:"payplug-payment-icon",style:{float:"right"}}),S={name:"american_express",label:(0,l.jsx)(g,{}),content:(0,l.jsx)(f,{}),edit:(0,l.jsx)(f,{}),canMakePayment:()=>!0,ariaLabel:m,supports:{features:y.supports}};(0,s.registerPaymentMethod)(S)})();